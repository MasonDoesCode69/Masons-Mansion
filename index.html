<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masonâ€™s Mansion | V8 Supernova</title>
    <style>
        :root {
            --bg: #050508;
            --accent: #00f2ff;
            --glow: rgba(0, 242, 255, 0.5);
            --glass: rgba(15, 15, 25, 0.7);
            --border: rgba(255, 255, 255, 0.1);
            --text: #ffffff;
            --font: 'Segoe UI', system-ui, sans-serif;
            --underglow: 0 8px 32px 0 rgba(0, 0, 0, 0.8), 0 0 15px var(--glow);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { 
            width: 100%; height: 100%; overflow: hidden; 
            background: var(--bg); color: var(--text); 
            font-family: var(--font); cursor: crosshair;
        }

        #bg-canvas { position: fixed; inset: 0; z-index: 0; filter: blur(2px); }

        /* --- COOLER LOGIN SCREEN --- */
        #auth-overlay {
            position: fixed; inset: 0; z-index: 10000;
            display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle, rgba(0,0,0,0.4) 0%, #000 100%);
            backdrop-filter: blur(10px);
            transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .login-card {
            background: var(--glass); padding: 40px; border-radius: 24px;
            border: 1px solid var(--border); text-align: center;
            box-shadow: var(--underglow); width: 350px;
        }
        .login-card h1 { font-size: 1.5rem; letter-spacing: 4px; margin-bottom: 20px; color: var(--accent); text-shadow: 0 0 10px var(--glow); }
        .login-card input {
            width: 100%; background: rgba(0,0,0,0.5); border: 1px solid var(--border);
            padding: 12px; border-radius: 10px; color: #fff; margin-bottom: 15px;
            text-align: center; font-family: monospace;
        }
        .login-card button {
            width: 100%; padding: 12px; border-radius: 10px; border: none;
            background: var(--accent); color: #000; font-weight: 900;
            cursor: pointer; text-transform: uppercase; transition: 0.3s;
        }
        .login-card button:hover { transform: scale(1.02); filter: brightness(1.2); box-shadow: 0 0 20px var(--accent); }

        /* --- DESKTOP --- */
        #desktop { position: relative; width: 100vw; height: 100vh; z-index: 10; display: none; opacity: 0; transition: 1s; }

        /* --- WINDOWS --- */
        .window {
            position: absolute; background: var(--glass);
            border: 1px solid var(--border); border-radius: 16px;
            backdrop-filter: blur(20px); display: flex; flex-direction: column;
            box-shadow: var(--underglow); overflow: hidden;
        }
        .win-header {
            padding: 12px 18px; background: rgba(255,255,255,0.03);
            display: flex; justify-content: space-between; align-items: center;
            cursor: move; border-bottom: 1px solid var(--border);
        }
        .win-title { font-size: 10px; font-weight: 900; color: var(--accent); letter-spacing: 1.5px; text-transform: uppercase; }
        .win-close { width: 25px; height: 25px; display:flex; align-items:center; justify-content:center; cursor: pointer; color: #ff5f56; font-weight: bold; }

        /* --- VIP CHROMA --- */
        .vip-mode { border: 2px solid transparent !important; animation: borderRGB 4s infinite linear; }
        @keyframes borderRGB {
            0% { border-color: #ff0000; box-shadow: 0 0 15px #ff0000; }
            33% { border-color: #00ff00; box-shadow: 0 0 15px #00ff00; }
            66% { border-color: #0000ff; box-shadow: 0 0 15px #0000ff; }
            100% { border-color: #ff0000; box-shadow: 0 0 15px #ff0000; }
        }

        /* --- TASKBAR --- */
        #taskbar {
            position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%);
            background: rgba(10, 10, 15, 0.8); border: 1px solid var(--border);
            padding: 10px 20px; border-radius: 20px; display: flex; gap: 15px;
            backdrop-filter: blur(20px); z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .t-icon {
            width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
            background: rgba(255,255,255,0.05); border-radius: 12px; cursor: pointer;
            font-size: 20px; transition: 0.3s;
        }
        .t-icon:hover { transform: translateY(-10px); background: var(--accent); color: #000; }

        .hidden { display: none !important; }
        iframe { width: 100%; flex: 1; border: none; background: #000; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="auth-overlay">
        <div class="login-card">
            <h1>MANSION V8</h1>
            <input type="password" id="sys-pass" placeholder="ENTER ACCESS KEY">
            <button onclick="Mansion.init()">Authorize</button>
            <p id="auth-status" style="margin-top:15px; font-size:10px; color:gray;">WAITING FOR KEY...</p>
        </div>
    </div>

    <div id="desktop">
        <div id="win-layer"></div>
        <div id="taskbar">
            <div class="t-icon" onclick="Mansion.spawn('games')">ðŸŽ®</div>
            <div class="t-icon" onclick="Mansion.spawn('terminal')">ðŸ“Ÿ</div>
            <div class="t-icon" onclick="Mansion.spawn('themes')">ðŸŽ¨</div>
            <div id="owner-icon" class="t-icon hidden" title="Owner Config" onclick="Mansion.spawn('owner')">ðŸ‘‘</div>
        </div>
    </div>

    <script>
        const Mansion = {
            rank: 'guest',
            zIndex: 100,
            themes: [
                { n: 'Supernova', a: '#00f2ff', g: 'rgba(0, 242, 255, 0.5)' },
                { n: 'Blood Moon', a: '#ff3c00', g: 'rgba(255, 60, 0, 0.5)' },
                { n: 'Toxic', a: '#a2ff00', g: 'rgba(162, 255, 0, 0.5)' }
            ],

            init() {
                const p = document.getElementById('sys-pass').value;
                const status = document.getElementById('auth-status');
                
                if(p === "masononly69") {
                    this.rank = "OWNER";
                    document.getElementById('owner-icon').classList.remove('hidden');
                    this.boot("ACCESS GRANTED: WELCOME MASTER MASON");
                } else if(p === "VIP67") {
                    this.rank = "VIP";
                    this.boot("ACCESS GRANTED: WELCOME VIP MEMBER");
                } else {
                    status.innerText = "INVALID KEY. ACCESS DENIED.";
                    status.style.color = "red";
                }
            },

            boot(msg) {
                const overlay = document.getElementById('auth-overlay');
                const desk = document.getElementById('desktop');
                overlay.style.opacity = "0";
                setTimeout(() => {
                    overlay.classList.add('hidden');
                    desk.style.display = "block";
                    setTimeout(() => desk.style.opacity = "1", 50);
                }, 800);
                this.initOrbs();
            },

            spawn(type) {
                const id = 'w-' + Math.random().toString(36).substr(2, 5);
                const win = document.createElement('div');
                win.className = 'window' + (this.rank === 'VIP' || this.rank === 'OWNER' ? ' vip-mode' : '');
                win.id = id;
                win.style.width = "500px"; win.style.height = "350px";
                win.style.left = "30%"; win.style.top = "20%";
                win.style.zIndex = ++this.zIndex;

                let content = '';
                if(type === 'games') content = '<div style="padding:20px;"><h3>Available Games</h3><p>Gladihoppers active in kernel.</p></div>';
                if(type === 'owner') content = `<div style="padding:20px;"><h3>Owner Dashboard</h3><p>Rank: ${this.rank}</p><button onclick="location.reload()" style="background:red; color:white; padding:5px; margin-top:10px; border-radius:5px;">Restart System</button></div>`;
                if(type === 'themes') {
                    content = '<div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; padding:20px;">' + 
                    this.themes.map(t => `<button onclick="Mansion.setTheme('${t.n}')" style="padding:10px; background:rgba(255,255,255,0.1); color:white; border:1px solid var(--border); border-radius:8px;">${t.n}</button>`).join('') + '</div>';
                }

                win.innerHTML = `
                    <div class="win-header" onmousedown="Mansion.drag(event, '${id}')">
                        <div class="win-title">${type} // rank_${this.rank}</div>
                        <div class="win-close" onclick="document.getElementById('${id}').remove()">Ã—</div>
                    </div>
                    ${content}`;
                document.getElementById('win-layer').appendChild(win);
            },

            setTheme(name) {
                const t = this.themes.find(x => x.n === name);
                const r = document.documentElement;
                r.style.setProperty('--accent', t.a);
                r.style.setProperty('--glow', t.g);
            },

            drag(e, id) {
                const el = document.getElementById(id);
                el.style.zIndex = ++this.zIndex;
                let ox = e.clientX - el.offsetLeft, oy = e.clientY - el.offsetTop;
                const mm = (e) => { el.style.left = (e.clientX - ox) + "px"; el.style.top = (e.clientY - oy) + "px"; };
                const mu = () => { window.removeEventListener('mousemove', mm); window.removeEventListener('mouseup', mu); };
                window.addEventListener('mousemove', mm);
                window.addEventListener('mouseup', mu);
            },

            initOrbs() {
                const c = document.getElementById('bg-canvas');
                const ctx = c.getContext('2d');
                let orbs = [];
                const resize = () => { c.width = window.innerWidth; c.height = window.innerHeight; };
                window.onresize = resize; resize();

                for(let i=0; i<30; i++) {
                    orbs.push({
                        x: Math.random()*c.width, y: Math.random()*c.height,
                        r: Math.random()*80 + 20,
                        vx: (Math.random()-0.5)*0.5, vy: (Math.random()-0.5)*0.5
                    });
                }

                const draw = () => {
                    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--bg');
                    ctx.fillRect(0,0,c.width,c.height);
                    orbs.forEach(o => {
                        o.x += o.vx; o.y += o.vy;
                        if(o.x<0||o.x>c.width) o.vx *= -1;
                        if(o.y<0||o.y>c.height) o.vy *= -1;
                        let grad = ctx.createRadialGradient(o.x, o.y, 0, o.x, o.y, o.r);
                        grad.addColorStop(0, getComputedStyle(document.documentElement).getPropertyValue('--glow'));
                        grad.addColorStop(1, 'transparent');
                        ctx.fillStyle = grad;
                        ctx.beginPath(); ctx.arc(o.x, o.y, o.r, 0, Math.PI*2); ctx.fill();
                    });
                    requestAnimationFrame(draw);
                };
                draw();
            }
        };
    </script>
</body>
</html>
