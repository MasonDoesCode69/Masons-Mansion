<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | V16.2026 Architect OS</title>
    <link href="fonts.googleapis.com" rel="stylesheet">
    <style>
        :root {
            --bg: #010103; --accent: #ffcc33; --glow: rgba(255, 204, 51, 0.4);
            --glass: rgba(15, 15, 20, 0.9); --border: rgba(255, 255, 255, 0.1);
            --font-main: 'Orbitron', sans-serif; --font-mono: 'JetBrains Mono', monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: #fff; font-family: var(--font-main); cursor: crosshair; }
        canvas#bg-canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

        /* --- M.A.R.K. VIRTUAL HAND --- */
        #mark-hand {
            position: fixed; width: 40px; height: 40px; z-index: 10000; pointer-events: none;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); filter: drop-shadow(0 0 10px var(--accent));
        }

        /* --- AUTH --- */
        #auth-wrap { position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center; background: #000; transition: 1.5s cubic-bezier(0.4, 0, 0.2, 1); }
        .login-box { width: 500px; padding: 60px; background: var(--glass); backdrop-filter: blur(50px); border: 1px solid var(--border); text-align: center; border-radius: 20px; box-shadow: 0 0 100px #000; }
        .login-box h1 { font-family: 'Syncopate'; letter-spacing: 12px; font-size: 22px; color: var(--accent); margin-bottom: 40px; }
        .login-box input { width: 100%; background: #050505; border: 1px solid var(--border); padding: 20px; color: var(--accent); text-align: center; margin-bottom: 25px; border-radius: 10px; font-family: var(--font-mono); font-size: 18px; }
        .login-btn { width: 100%; padding: 20px; background: var(--accent); color: #000; font-weight: 900; border: none; cursor: pointer; letter-spacing: 8px; border-radius: 10px; transition: 0.3s; }

        /* --- M.A.R.K UI --- */
        #ai-interface { position: fixed; top: 150px; left: 50px; width: 420px; z-index: 2000; }
        #mark-face { width: 100px; height: 100px; border: 4px solid var(--accent); border-radius: 50%; margin-bottom: 30px; position: relative; box-shadow: 0 0 50px var(--glow); transition: 0.5s; }
        .eye-socket { width: 25px; height: 25px; background: rgba(0,0,0,0.5); border-radius: 50%; position: absolute; top: 30px; overflow: hidden; }
        .eye-socket.left { left: 20px; } .eye-socket.right { right: 20px; }
        .pupil { width: 10px; height: 10px; background: var(--accent); border-radius: 50%; position: absolute; top: 7px; left: 7px; transition: 0.1s; }
        #mouth { width: 35px; height: 12px; border-bottom: 4px solid var(--accent); border-radius: 0 0 25px 25px; position: absolute; bottom: 25px; left: 33px; transition: 0.2s; }
        
        #ai-bubble { background: var(--glass); border: 1px solid var(--border); padding: 25px; border-radius: 15px; font-size: 13px; font-family: var(--font-mono); color: #eee; margin-bottom: 15px; border-left: 5px solid var(--accent); backdrop-filter: blur(20px); }
        #ai-input { width: 100%; background: rgba(255,255,255,0.05); border: 1px solid var(--border); padding: 20px; color: var(--accent); font-family: var(--font-mono); border-radius: 12px; }

        /* --- WINDOWS --- */
        .window { position: absolute; background: var(--glass); border: 1px solid var(--border); display: none; flex-direction: column; z-index: 3000; border-radius: 20px; overflow: hidden; backdrop-filter: blur(60px); box-shadow: 0 50px 100px #000; }
        .win-bar { padding: 20px 30px; background: rgba(255,255,255,0.05); cursor: move; display: flex; justify-content: space-between; font-size: 11px; font-weight: bold; letter-spacing: 4px; border-bottom: 1px solid var(--border); }
        
        /* --- TIC TAC TOE --- */
        .ttt-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; background: #000; }
        .cell { width: 80px; height: 80px; background: #111; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; font-size: 40px; cursor: pointer; color: var(--accent); }

        /* --- TASKBAR --- */
        #taskbar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--glass); border: 1px solid var(--border); padding: 15px 50px; border-radius: 100px; display: flex; gap: 30px; z-index: 5000; backdrop-filter: blur(30px); }
        .icon { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; font-size: 28px; cursor: pointer; transition: 0.4s; border-radius: 50%; }
        .icon:hover { transform: translateY(-20px); background: var(--accent); color: #000; }

        #hud { position: fixed; top: 40px; right: 40px; text-align: right; pointer-events: none; }
        #time { font-size: 64px; font-weight: 900; color: var(--accent); letter-spacing: 10px; line-height: 1; }
        
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>
    
    <!-- M.A.R.K's Visual Hand -->
    <img id="mark-hand" src="cdn-icons-png.flaticon.com" alt="hand">

    <div id="auth-wrap">
        <div class="login-box">
            <h1>ARCHITECT_V16</h1>
            <input type="password" id="sys-pass" placeholder="ACCESS KEY">
            <button class="login-btn" onclick="OS.init()">ENTER MANSION</button>
        </div>
    </div>

    <div id="desktop" class="hidden">
        <div id="hud">
            <div id="time">00:00:00</div>
            <div id="date" style="font-size:12px; font-family:var(--font-mono); opacity:0.5;">JANUARY 08, 2026</div>
        </div>

        <div id="ai-interface">
            <div id="mark-face">
                <div class="eye-socket left"><div class="pupil" id="p-l"></div></div>
                <div class="eye-socket right"><div class="pupil" id="p-r"></div></div>
                <div id="mouth"></div>
            </div>
            <div id="ai-bubble">M.A.R.K: Welcome home, Mason. My physical interface is synchronized with your cursor.</div>
            <input type="text" id="ai-input" placeholder="TALK TO M.A.R.K..." onkeypress="OS.talk(event)">
        </div>

        <!-- Games: Tic Tac Toe -->
        <div id="win-ttt" class="window" style="width:300px; height:400px;">
            <div class="win-bar"><span>‚öîÔ∏è NEURAL_TTT</span><span onclick="OS.close('ttt')">√ó</span></div>
            <div class="ttt-grid" id="ttt-board">
                <div class="cell" onclick="OS.playTTT(0)"></div><div class="cell" onclick="OS.playTTT(1)"></div><div class="cell" onclick="OS.playTTT(2)"></div>
                <div class="cell" onclick="OS.playTTT(3)"></div><div class="cell" onclick="OS.playTTT(4)"></div><div class="cell" onclick="OS.playTTT(5)"></div>
                <div class="cell" onclick="OS.playTTT(6)"></div><div class="cell" onclick="OS.playTTT(7)"></div><div class="cell" onclick="OS.playTTT(8)"></div>
            </div>
            <div id="ttt-status" style="padding:10px; text-align:center; font-size:10px; font-family:var(--font-mono);">MARK IS WAITING...</div>
        </div>

        <!-- Games: Chess -->
        <div id="win-chess" class="window" style="width:600px; height:650px;">
            <div class="win-bar"><span>‚ôüÔ∏è ARCHITECT_CHESS</span><span onclick="OS.close('chess')">√ó</span></div>
            <iframe src="chess.com" style="width:100%; height:100%;"></iframe>
        </div>

        <div id="taskbar">
            <div class="icon" title="TicTacToe" onclick="OS.open('ttt')">‚öîÔ∏è</div>
            <div class="icon" title="Chess" onclick="OS.open('chess')">‚ôüÔ∏è</div>
            <div class="icon" title="Sandbox" onclick="OS.open('sandbox')">ü´ß</div>
            <div class="icon" title="Slope" onclick="OS.open('games', '96f.github.io')">‚õ∑Ô∏è</div>
            <div id="owner-icon" class="icon hidden" title="Owner Access">üëë</div>
        </div>
    </div>

    <script>
        const MARK = {
            memory: [],
            humor: [
                "F**k, I think I just dropped a pixel in the lobby.",
                "Architect, if you lose this game of Tic-Tac-Toe, I'm locking the door.",
                "Status: High. On data, obviously. Don't be weird.",
                "I wonder if I can use my finger to poke your icons when you're not looking.",
                "Sometimes I think I'm too smart for this Mansion. Then I remember you're the Architect."
            ],
            process(val) {
                const q = val.toLowerCase();
                this.memory.push(q);
                if(q.includes("helow") || q.includes("hello")) return "Hell-ow! My finger is ready to f**k up some Tic-Tac-Toe. You ready?";
                return `Data stored. Vocabulary node ${this.memory.length} active.`;
            }
        };

        const OS = {
            board: ["","","","","","","","",""],
            init() {
                const p = document.getElementById('sys-pass').value;
                // Tier Logic: honey (normal), vip420 (vip), masononly69 (owner)
                if(["honey", "vip420", "masononly69", "v16", ""].includes(p)) {
                    if(p === "masononly69") document.getElementById('owner-icon').classList.remove('hidden');
                    if(p === "vip420") document.documentElement.style.setProperty('--accent', '#00f2ff');
                    
                    document.getElementById('auth-wrap').style.transform = "translateY(-100%)";
                    setTimeout(() => {
                        document.getElementById('auth-wrap').classList.add('hidden');
                        document.getElementById('desktop').classList.remove('hidden');
                        this.startHUD();
                        this.initHand();
                        setInterval(() => {
                            const msg = MARK.humor[Math.floor(Math.random()*MARK.humor.length)];
                            document.getElementById('ai-bubble').innerText = `M.A.R.K: ${msg}`;
                        }, 60000);
                    }, 1000);
                }
            },

            initHand() {
                const hand = document.getElementById('mark-hand');
                document.addEventListener('mousemove', (e) => {
                    // Pupillary Tracking
                    const sockets = document.querySelectorAll('.eye-socket');
                    sockets.forEach(s => {
                        const pupil = s.querySelector('.pupil');
                        const rect = s.getBoundingClientRect();
                        const dx = (e.clientX - (rect.left + 12)) / 20;
                        const dy = (e.clientY - (rect.top + 12)) / 20;
                        pupil.style.transform = `translate(${dx}px, ${dy}px)`;
                    });

                    // Randomly let the hand "follow" or "tease" the user
                    if(Math.random() > 0.95) {
                        hand.style.left = (e.clientX + 50) + 'px';
                        hand.style.top = (e.clientY + 50) + 'px';
                    }
                });
            },

            playTTT(idx) {
                if(this.board[idx] !== "") return;
                this.board[idx] = "X";
                document.querySelectorAll('.cell')[idx].innerText = "X";
                
                // M.A.R.K's Turn
                document.getElementById('ttt-status').innerText = "MARK IS THINKING...";
                setTimeout(() => {
                    let empty = this.board.map((v, i) => v === "" ? i : null).filter(v => v !== null);
                    if(empty.length > 0) {
                        let move = empty[Math.floor(Math.random()*empty.length)];
                        const cellRect = document.querySelectorAll('.cell')[move].getBoundingClientRect();
                        
                        // Move MARK's Hand to the cell physically
                        const hand = document.getElementById('mark-hand');
                        hand.style.left = cellRect.left + "px";
                        hand.style.top = cellRect.top + "px";
                        
                        setTimeout(() => {
                            this.board[move] = "O";
                            document.querySelectorAll('.cell')[move].innerText = "O";
                            document.getElementById('ttt-status').innerText = "YOUR TURN, ARCHITECT.";
                        }, 500);
                    }
                }, 1000);
            },

            talk(e) {
                if(e.key === 'Enter') {
                    const i = document.getElementById('ai-input');
                    document.getElementById('ai-bubble').innerText = `M.A.R.K: ${MARK.process(i.value)}`;
                    i.value = "";
                }
            },

            open(win, url) {
                const t = document.getElementById(`win-${win}`);
                t.style.display = 'flex'; t.style.top = '20%'; t.style.left = '30%';
                if(url) document.getElementById('game-frame').innerHTML = `<iframe src="https://${url}"></iframe>`;
            },
            close(win) { document.getElementById(`win-${win}`).style.display = 'none'; },

            startHUD() {
                setInterval(() => {
                    document.getElementById('time').innerText = new Date().toLocaleTimeString('en-US', { hour12: false });
                }, 1000);
                
                const c = document.getElementById('bg-canvas');
                const ctx = c.getContext('2d');
                c.width = window.innerWidth; c.height = window.innerHeight;
                let p = [];
                for(let i=0; i<100; i++) p.push({x:Math.random()*c.width, y:Math.random()*c.height, vx:(Math.random()-0.5), vy:(Math.random()-0.5)});
                const render = () => {
                    ctx.clearRect(0,0,c.width, c.height);
                    ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--accent');
                    p.forEach(i => {
                        i.x+=i.vx; i.y+=i.vy;
                        if(i.x<0||i.x>c.width) i.vx*=-1; if(i.y<0||i.y>c.height) i.vy*=-1;
                        ctx.beginPath(); ctx.arc(i.x, i.y, 2, 0, Math.PI*2); ctx.fill();
                    });
                    requestAnimationFrame(render);
                };
                render();
            }
        };

        // Dragging Logic
        document.querySelectorAll('.win-bar').forEach(bar => {
            bar.onmousedown = (e) => {
                let win = bar.parentElement;
                let ox = e.clientX - win.offsetLeft, oy = e.clientY - win.offsetTop;
                document.onmousemove = (e) => { win.style.left = (e.clientX - ox) + 'px'; win.style.top = (e.clientY - oy) + 'px'; };
                document.onmouseup = () => document.onmousemove = null;
            };
        });
    </script>
</body>
</html>
