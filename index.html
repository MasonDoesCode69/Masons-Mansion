<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mason‚Äôs Mansion | Omega Edition 2026</title>
    <style>
        :root {
            --bg: #030305;
            --accent: #ffcc33;
            --glow: rgba(255, 204, 51, 0.4);
            --glass: rgba(10, 10, 15, 0.92);
            --border: rgba(255, 255, 255, 0.1);
            --text: #f0f0f0;
            --font: 'Outfit', 'Segoe UI', system-ui, sans-serif;
            --window-shadow: 0 25px 60px rgba(0,0,0,0.8);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body, html { width: 100%; height: 100%; overflow: hidden; background: var(--bg); color: var(--text); font-family: var(--font); cursor: crosshair; touch-action: none; }

        #bg-canvas { position: fixed; inset: 0; z-index: 0; filter: contrast(1.1) brightness(1.1); }

        /* --- AUTH SYSTEM --- */
        #auth-overlay {
            position: fixed; inset: 0; z-index: 9999; display: flex; align-items: center; justify-content: center;
            background: radial-gradient(circle at center, #111, #000); transition: 1.5s cubic-bezier(0.8, 0, 0.2, 1);
        }
        .login-card {
            background: var(--glass); padding: 50px; border-radius: 40px; border: 1px solid var(--accent);
            text-align: center; width: 400px; backdrop-filter: blur(30px); box-shadow: 0 0 100px rgba(255, 204, 51, 0.1);
        }
        .login-card h1 { font-size: 32px; letter-spacing: 12px; margin-bottom: 10px; color: var(--accent); text-shadow: 0 0 20px var(--glow); }
        .login-card input { width: 100%; background: #000; border: 1px solid var(--border); padding: 18px; border-radius: 15px; color: #fff; margin-bottom: 15px; text-align: center; font-size: 16px; transition: 0.3s; }
        .login-card input:focus { border-color: var(--accent); box-shadow: 0 0 15px var(--glow); }
        .login-card button { width: 100%; padding: 18px; border-radius: 15px; border: none; background: var(--accent); color: #000; font-weight: 900; cursor: pointer; transition: 0.4s; letter-spacing: 2px; }
        .login-card button:hover { transform: scale(1.02); box-shadow: 0 10px 30px var(--glow); }

        /* --- SIDEBAR & MADNESS --- */
        #sidebar {
            position: fixed; left: -280px; top: 50%; transform: translateY(-50%); width: 280px;
            background: var(--glass); border: 1px solid var(--border); padding: 25px; border-radius: 0 30px 30px 0;
            z-index: 2000; transition: 0.6s cubic-bezier(0.19, 1, 0.22, 1); backdrop-filter: blur(20px);
        }
        #sidebar.open { left: 0; border-right: 3px solid var(--accent); box-shadow: 30px 0 60px rgba(0,0,0,0.6); }
        #sidebar-tab {
            position: absolute; right: -50px; top: 50%; transform: translateY(-50%);
            background: var(--accent); color: #000; padding: 20px 12px; border-radius: 0 15px 15px 0;
            cursor: pointer; font-weight: 900; writing-mode: vertical-rl; font-size: 12px; letter-spacing: 3px;
        }

        .section-label { font-size: 10px; color: var(--accent); margin: 15px 0 8px; letter-spacing: 3px; text-transform: uppercase; font-weight: bold; opacity: 0.8; }
        .option-btn { width: 100%; padding: 12px; margin: 4px 0; background: rgba(255,255,255,0.04); border: 1px solid var(--border); color: #ddd; border-radius: 12px; font-size: 11px; cursor: pointer; text-align: left; transition: 0.2s; display: flex; justify-content: space-between; align-items: center; }
        .option-btn:hover { background: rgba(255,255,255,0.08); border-color: var(--accent); transform: translateX(5px); }
        .option-btn.active { background: var(--accent); color: #000; font-weight: 900; box-shadow: 0 0 15px var(--glow); }

        /* --- DESKTOP WINDOWS --- */
        #desktop { position: relative; width: 100vw; height: 100vh; z-index: 10; display: none; }
        .window {
            position: absolute; background: var(--glass); border: 1px solid var(--border); border-radius: 25px;
            backdrop-filter: blur(25px); overflow: hidden; display: flex; flex-direction: column; 
            box-shadow: var(--window-shadow); min-width: 400px; min-height: 300px; z-index: 100;
        }
        .win-header { padding: 15px 25px; background: rgba(255,255,255,0.03); cursor: move; display: flex; justify-content: space-between; align-items: center; }
        .win-title { font-size: 12px; font-weight: 900; color: var(--accent); letter-spacing: 2px; }
        .win-close { cursor: pointer; color: #ff5f56; font-size: 24px; transition: 0.2s; }
        .win-close:hover { transform: scale(1.2); }
        .win-content { flex: 1; padding: 20px; overflow-y: auto; scrollbar-width: none; }

        /* --- GRID LAYOUTS --- */
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .theme-node { height: 80px; border-radius: 15px; border: 1px solid var(--border); cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: 900; text-align: center; padding: 5px; }
        .theme-node:hover { transform: scale(1.05); border-color: #fff; z-index: 10; }

        /* --- TASKBAR --- */
        #taskbar { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: var(--glass); border: 1px solid var(--border); padding: 15px 30px; border-radius: 30px; display: flex; gap: 25px; z-index: 1000; backdrop-filter: blur(15px); }
        .t-icon { width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.02); border-radius: 20px; cursor: pointer; font-size: 28px; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .t-icon:hover { transform: translateY(-15px) rotate(8deg); background: var(--accent); color: #000; box-shadow: 0 15px 30px var(--glow); }

        iframe { width: 100%; height: 100%; border: none; background: #000; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <canvas id="bg-canvas"></canvas>

    <div id="auth-overlay">
        <div class="login-card">
            <h1>MASON V16</h1>
            <p style="font-size: 9px; opacity: 0.6; letter-spacing: 4px; margin-bottom: 25px;">OMEGA ARCHITECTURE 2026</p>
            <input type="password" id="sys-pass" placeholder="PASSWORD">
            <button onclick="Mansion.init()">ACCESS TERMINAL</button>
        </div>
    </div>

    <div id="desktop">
        <div id="sidebar">
            <div id="sidebar-tab" onclick="document.getElementById('sidebar').classList.toggle('open')">OMEGA CONTROLS</div>
            
            <div class="section-label">Simulation</div>
            <button class="option-btn active" id="m-float" onclick="Mansion.toggle('float')">Fluid Drift <span>ON</span></button>
            <button class="option-btn" id="m-rgb" onclick="Mansion.toggle('rgb')">Neural RGB <span>OFF</span></button>
            <button class="option-btn" id="m-pulse" onclick="Mansion.toggle('pulse')">Size Resonance <span>OFF</span></button>
            <button class="option-btn" id="m-magnet" onclick="Mansion.toggle('magnet')">Pointer Magnet <span>OFF</span></button>
            
            <div class="section-label">Shape Engine</div>
            <button class="option-btn active" id="s-circle" onclick="Mansion.setShape('circle')">Spheres</button>
            <button class="option-btn" id="s-square" onclick="Mansion.setShape('square')">Cubes</button>
            <button class="option-btn" id="s-star" onclick="Mansion.setShape('star')">Stars</button>
            <button class="option-btn" id="s-meme" onclick="Mansion.setShape('meme')">Meme Swarm (‚ö†Ô∏è)</button>
            
            <div class="section-label">Actions</div>
            <button class="option-btn" onclick="Mansion.chaosBurst()">Hyper Swarm</button>
            <button class="option-btn" onclick="Mansion.clearOrbs()" style="color:#ff5f56">Purge Simulation</button>
        </div>

        <div id="win-layer"></div>

        <div id="taskbar">
            <div class="t-icon" title="Themes" onclick="Mansion.spawn('themes')">üé®</div>
            <div class="t-icon" title="Applications" onclick="Mansion.spawn('apps')">üß©</div>
            <div class="t-icon" title="Games" onclick="Mansion.spawn('games')">üïπÔ∏è</div>
            <div class="t-icon hidden" id="owner-icon" onclick="Mansion.spawn('owner')">üëë</div>
        </div>
    </div>

    <script>
        const Mansion = {
            rank: 'guest', orbs: [], canvas: null, ctx: null, mouse: { x: -1000, y: -1000 },
            mods: { float: true, rgb: false, pulse: false, magnet: false, shape: 'circle' },
            memeImgs: [],
            themes: [
                { n: 'Honey', a: '#ffcc33', g: 'rgba(255, 204, 51, 0.4)', b: '#050400' },
                { n: 'Cyber', a: '#00f2ff', g: 'rgba(0, 242, 255, 0.4)', b: '#020b12' },
                { n: 'Blood', a: '#ff1f1f', g: 'rgba(255, 31, 31, 0.4)', b: '#0a0000' },
                { n: 'Venom', a: '#39ff14', g: 'rgba(57, 255, 20, 0.4)', b: '#030800' },
                { n: 'Matrix', a: '#00ff41', g: 'rgba(0, 255, 65, 0.4)', b: '#000000' },
                { n: 'Sakura', a: '#ffb3ba', g: 'rgba(255, 179, 186, 0.4)', b: '#0d0a0a' },
                { n: 'Amethyst', a: '#9d50bb', g: 'rgba(157, 80, 187, 0.4)', b: '#08000f' },
                { n: 'Gold', a: '#ffd700', g: 'rgba(255, 215, 0, 0.4)', b: '#0a0a00' },
                { n: 'Ice', a: '#e0ffff', g: 'rgba(224, 255, 255, 0.4)', b: '#000a0a' },
                { n: 'Inferno', a: '#ff4500', g: 'rgba(255, 69, 0, 0.4)', b: '#0a0200' }
            ],

            init() {
                const p = document.getElementById('sys-pass').value;
                if(p === "masononly69") { this.rank = "OWNER"; document.getElementById('owner-icon').classList.remove('hidden'); }
                else if(p === "honey") { this.rank = "MEMBER"; }
                else { alert("INVALID CREDENTIALS"); return; }

                document.getElementById('auth-overlay').style.transform = 'translateY(-100%)';
                setTimeout(() => {
                    document.getElementById('auth-overlay').style.display = 'none';
                    document.getElementById('desktop').style.display = 'block';
                    this.bootCanvas();
                    this.loadMemes();
                }, 1200);
            },

            loadMemes() {
                const urls = [
                    'w7.pngwing.com',
                    'e7.pngegg.com'
                ];
                urls.forEach(u => { const img = new Image(); img.src = u; this.memeImgs.push(img); });
            },

            bootCanvas() {
                this.canvas = document.getElementById('bg-canvas');
                this.ctx = this.canvas.getContext('2d');
                window.addEventListener('resize', () => this.resize());
                window.addEventListener('mousemove', (e) => { this.mouse.x = e.clientX; this.mouse.y = e.clientY; });
                this.resize();
                for(let i=0; i<25; i++) this.spawnOrb();
                this.animate();
            },

            resize() { this.canvas.width = window.innerWidth; this.canvas.height = window.innerHeight; },

            spawnOrb() {
                this.orbs.push({
                    x: Math.random() * innerWidth, y: Math.random() * innerHeight,
                    vx: (Math.random() - 0.5) * 2.5, vy: (Math.random() - 0.5) * 2.5,
                    r: 25 + Math.random() * 35, hue: Math.random() * 360,
                    rot: Math.random() * Math.PI, rs: (Math.random() - 0.5) * 0.05
                });
            },

            toggle(m) {
                this.mods[m] = !this.mods[m];
                const btn = document.getElementById(`m-${m}`);
                btn.classList.toggle('active');
                btn.querySelector('span').innerText = this.mods[m] ? 'ON' : 'OFF';
            },

            setShape(s) {
                this.mods.shape = s;
                ['circle','square','star','meme'].forEach(sh => document.getElementById(`s-${sh}`).classList.remove('active'));
                document.getElementById(`s-${s}`).classList.add('active');
            },

            chaosBurst() { for(let i=0; i<80; i++) this.spawnOrb(); },
            clearOrbs() { this.orbs = []; },

            applyTheme(idx) {
                const t = this.themes[idx];
                document.documentElement.style.setProperty('--accent', t.a);
                document.documentElement.style.setProperty('--glow', t.g);
                document.documentElement.style.setProperty('--bg', t.b);
            },

            spawn(type) {
                const win = document.createElement('div');
                win.className = 'window';
                win.style.top = '150px'; win.style.left = '350px';
                win.innerHTML = `
                    <div class="win-header"><span class="win-title">${type.toUpperCase()}</span><span class="win-close" onclick="this.parentElement.parentElement.remove()">√ó</span></div>
                    <div class="win-content" id="content-${type}"></div>
                `;
                document.getElementById('win-layer').appendChild(win);
                this.drag(win);
                this.fillWin(type);
            },

            fillWin(type) {
                const target = document.getElementById(`content-${type}`);
                if(type === 'themes') {
                    target.className = 'win-content grid-3';
                    this.themes.forEach((t, i) => {
                        target.innerHTML += `<div class="theme-node" onclick="Mansion.applyTheme(${i})" style="background:${t.b}; border-bottom: 4px solid ${t.a}">${t.n}</div>`;
                    });
                } else if(type === 'games') {
                    target.className = 'win-content grid-3';
                    const gs = [['Slope','96f.github.io'],['Sans','jcw87.github.io'],['Minecraft','classic.minecraft.net']];
                    gs.forEach(g => {
                        target.innerHTML += `<div class="theme-node" onclick="Mansion.play('${g[1]}')">${g[0]}</div>`;
                    });
                } else if(type === 'owner') {
                    target.innerHTML = `
                        <div style="text-align:center; padding:20px;">
                            <h2 style="color:var(--accent); letter-spacing:5px;">OWNER TERMINAL</h2>
                            <p style="font-size:10px; opacity:0.5; margin-bottom:20px;">ACCESS LEVEL: ROOT</p>
                            <div class="grid-3">
                                <button class="option-btn" onclick="Mansion.chaosBurst()">Swarm All</button>
                                <button class="option-btn" onclick="Mansion.clearOrbs()">Clear Field</button>
                                <button class="option-btn" onclick="location.reload()">Reset Sys</button>
                            </div>
                        </div>
                    `;
                }
            },

            play(url) {
                const wins = document.querySelectorAll('.win-content');
                wins[wins.length-1].innerHTML = `<iframe src="${url}"></iframe>`;
                wins[wins.length-1].style.padding = '0';
            },

            drag(el) {
                let p1 = 0, p2 = 0, p3 = 0, p4 = 0;
                el.querySelector('.win-header').onmousedown = (e) => {
                    p3 = e.clientX; p4 = e.clientY;
                    document.onmouseup = () => { document.onmouseup = null; document.onmousemove = null; };
                    document.onmousemove = (e) => {
                        p1 = p3 - e.clientX; p2 = p4 - e.clientY;
                        p3 = e.clientX; p4 = e.clientY;
                        el.style.top = (el.offsetTop - p2) + "px"; el.style.left = (el.offsetLeft - p1) + "px";
                    };
                };
            },

            drawStar(x, y, r, p, m) {
                this.ctx.beginPath();
                for (let i = 0; i < p * 2; i++) {
                    const radius = i % 2 === 0 ? r : r * m;
                    const angle = (i * Math.PI) / p;
                    this.ctx.lineTo(x + radius * Math.sin(angle), y + radius * Math.cos(angle));
                }
                this.ctx.closePath();
                this.ctx.fill();
            },

            animate() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                const accent = getComputedStyle(document.documentElement).getPropertyValue('--accent');

                this.orbs.forEach(o => {
                    if(this.mods.float) { o.x += o.vx; o.y += o.vy; o.rot += o.rs; }
                    if(this.mods.magnet) {
                        const dx = this.mouse.x - o.x, dy = this.mouse.y - o.y;
                        const dist = Math.sqrt(dx*dx + dy*dy);
                        if(dist < 300) { o.x += dx * 0.02; o.y += dy * 0.02; }
                    }

                    if(o.x < 0 || o.x > innerWidth) o.vx *= -1;
                    if(o.y < 0 || o.y > innerHeight) o.vy *= -1;

                    const rad = o.r + (this.mods.pulse ? Math.sin(Date.now()*0.005)*10 : 0);
                    const color = this.mods.rgb ? `hsla(${o.hue}, 80%, 60%, 0.7)` : accent;
                    
                    // COMPLEX GRADIENT ENGINE
                    const grad = this.ctx.createRadialGradient(o.x - rad*0.3, o.y - rad*0.3, rad*0.1, o.x, o.y, rad);
                    grad.addColorStop(0, '#fff');
                    grad.addColorStop(0.2, color);
                    grad.addColorStop(1, 'transparent');
                    this.ctx.fillStyle = grad;

                    if(this.mods.shape === 'circle') {
                        this.ctx.beginPath(); this.ctx.arc(o.x, o.y, rad, 0, Math.PI*2); this.ctx.fill();
                    } else if(this.mods.shape === 'square') {
                        this.ctx.save(); this.ctx.translate(o.x, o.y); this.ctx.rotate(o.rot);
                        this.ctx.fillRect(-rad, -rad, rad*2, rad*2); this.ctx.restore();
                    } else if(this.mods.shape === 'star') {
                        this.drawStar(o.x, o.y, rad, 5, 0.5);
                    } else if(this.mods.shape === 'meme') {
                        const img = this.memeImgs[Math.floor(o.hue % this.memeImgs.length)];
                        if(img && img.complete) {
                            this.ctx.save(); this.ctx.translate(o.x, o.y); this.ctx.rotate(o.rot);
                            this.ctx.drawImage(img, -rad, -rad, rad*2, rad*2); this.ctx.restore();
                        }
                    }
                    if(this.mods.rgb) o.hue += 1;
                });
                requestAnimationFrame(() => this.animate());
            }
        };
    </script>
</body>
</html>
